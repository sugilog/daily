<%- model_class = Dailylog -%>
<div class="page-header">
  <h1>
    <%= start_date.year %>.<%= start_date.month %>: <%= @topic.title %>
    <small>
      <%= @topic.description %>
    </small>
  </h1>
</div>


<%= link_to t('.edit', :default => t("helpers.links.edit")),
            edit_user_topic_path(current_user, @topic), :class => 'btn' %>
<%= link_to t('.destroy', :default => t("helpers.links.destroy")),
            user_topic_path(current_user, @topic),
            :method => 'delete',
            :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
            :class => 'btn btn-danger' %>

<br />
<br />

<ul class="pager">
  <li class="previous">
  <%= link_to user_topic_dailylogs_path(current_user, @topic, year: start_date.prev_month.year, month: start_date.prev_month.month) do %>
    &larr; Previous
  <% end %>
  </li>
  <li class="next">
  <%= link_to user_topic_dailylogs_path(current_user, @topic, year: start_date.next_month.year, month: start_date.next_month.month) do %>
    Next &rarr;
  <% end %>
  </li>
</ul>

<br />

<% unless @dailylogs.empty? %>
<ul class="nav nav-tabs nav-stacked">
  <%
    @dailylogs.each do |date, dailylog|
      link_path = dailylog.new_record? ?
        new_user_topic_dailylog_path(current_user, @topic, logged_on: date) :
        edit_user_topic_dailylog_path(current_user, @topic, dailylog)
  %>
  <li>
  <%= link_to link_path do %>
    <%= date.mday %>
    <%= content_tag :span, dailylog.score, class: "badge" %>
    <% if dailylog.memo.present? %>
      (<%= content_tag :small, (dailylog.memo) %>)
    <% end %>
  <% end %>
  </li>
  <% end %>
</ul>
<% end %>

<br />

<ul class="pager">
  <li class="previous">
  <%= link_to user_topic_dailylogs_path(current_user, @topic, year: start_date.prev_month.year, month: start_date.prev_month.month) do %>
    &larr; Previous
  <% end %>
  </li>
  <li class="next">
  <%= link_to user_topic_dailylogs_path(current_user, @topic, year: start_date.next_month.year, month: start_date.next_month.month) do %>
    Next &rarr;
  <% end %>
  </li>
</ul>
